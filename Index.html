<!-- PWA Meta Tags -->
<meta name="theme-color" content="#0a0a0a">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="InvestPro">
<meta name="description" content="Professional Investment Tracking Platform">

<link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIkludmVzdFBybyAtIFByb2Zlc3Npb25hbCBJbnZlc3RtZW50IFRyYWNrZXIiLAogICJzaG9ydF9uYW1lIjogIkludmVzdFBybyIsCiAgInN0YXJ0X3VybCI6ICIvIiwKICAiZGlzcGxheSI6ICJzdGFuZGFsb25lIiwKICAiYmFja2dyb3VuZF9jb2xvciI6ICIjMGEwYTBhIiwKICAidGhlbWVfY29sb3IiOiAiIzBhMGEwYSIsCiAgImljb25zIjogWwogICAgewogICAgICAic3JjIjogImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjNhV1IwYUQwaU1Ua3lJaUJvWldsbmFIUTlJakU1TWlJZ2RtbGxkMEp2ZUQwaU1DQXdJREU1TWlBeE9USWlJR1pwYkd3OUltNXZibVVpSUhodGJHNXpQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh5TURBd0wzTjJaeUkrQ2p4eVpXTjBJSGRwWkhSb1BTSXhPVElpSUdobGFXZG9kRDBpTVRreUlpQnllRDBpTWpRaUlHWnBiR3c5SWlNd1lUQmhNR0VpTHo0S1BIUmxlSFFnZUQwaU9UWWlJSGs5SWpFd05DSWdabTl1ZEMxbVlXMXBiSGs5SWtGeWFXRnNMQ0J6WVc1ekxYTmxjbWxtSWlCbWIyNTBMWE5wZW1VOUlqUTRJaUJtYjI1MExYZGxhV2RvZEQwaVltOXNaQ0lnWm1sc2JEMGlkMmhwZEdVaUlIUmxlSFE4WVc1amFHOXlQU0p0YVdSa2JHVWlQa2s4TDNSbGVIUStDand2YzNablBnbz0iLAogICAgICAic2l6ZXMiOiAiMTkyeDE5MiIsCiAgICAgICJ0eXBlIjogImltYWdlL3N2Zyt4bWwiCiAgICB9CiAgXQp9">

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    tailwind.config = {
        theme: {
            extend: {
                fontFamily: {
                    'inter': ['Inter', 'sans-serif']
                },
                colors: {
                    'dark': '#0a0a0a',
                    'darker': '#1a1a1a',
                    'accent': '#2a2a2a',
                    'primary': '#00d4ff',
                    'secondary': '#ff6b35',
                    'success': '#00ff88',
                    'warning': '#ffaa00'
                }
            }
        }
    }
</script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    
    body { 
        font-family: 'Inter', sans-serif; 
        background: #0a0a0a;
        color: white;
        overflow-x: hidden;
    }

    /* 3D Effects */
    .card-3d {
        background: linear-gradient(145deg, #1a1a1a, #0f0f0f);
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: 
            0 8px 32px rgba(0, 0, 0, 0.3),
            inset 0 1px 0 rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        transform-style: preserve-3d;
        transition: all 0.3s ease;
    }

    .card-3d:hover {
        transform: translateY(-5px) rotateX(5deg);
        box-shadow: 
            0 20px 40px rgba(0, 0, 0, 0.4),
            inset 0 1px 0 rgba(255, 255, 255, 0.2);
    }

    .glass-morphism {
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: 
            0 8px 32px rgba(0, 0, 0, 0.3),
            inset 0 1px 0 rgba(255, 255, 255, 0.1);
    }

    .neon-glow {
        box-shadow: 
            0 0 20px rgba(0, 212, 255, 0.3),
            0 0 40px rgba(0, 212, 255, 0.2),
            0 0 60px rgba(0, 212, 255, 0.1);
    }

    .neon-text {
        text-shadow: 
            0 0 10px rgba(0, 212, 255, 0.8),
            0 0 20px rgba(0, 212, 255, 0.6),
            0 0 30px rgba(0, 212, 255, 0.4);
    }

    .floating {
        animation: floating 6s ease-in-out infinite;
    }

    @keyframes floating {
        0%, 100% { transform: translateY(0px) rotateY(0deg); }
        25% { transform: translateY(-10px) rotateY(5deg); }
        50% { transform: translateY(-5px) rotateY(0deg); }
        75% { transform: translateY(-15px) rotateY(-5deg); }
    }

    .pulse-3d {
        animation: pulse3d 2s infinite;
    }

    @keyframes pulse3d {
        0%, 100% { 
            transform: scale(1) rotateX(0deg);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
        }
        50% { 
            transform: scale(1.05) rotateX(5deg);
            box-shadow: 0 0 40px rgba(0, 212, 255, 0.6);
        }
    }

    .gradient-3d {
        background: linear-gradient(135deg, 
            rgba(0, 212, 255, 0.2) 0%,
            rgba(255, 107, 53, 0.2) 50%,
            rgba(0, 255, 136, 0.2) 100%);
    }

    .btn-3d {
        background: linear-gradient(145deg, #2a2a2a, #1a1a1a);
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: 
            0 4px 15px rgba(0, 0, 0, 0.3),
            inset 0 1px 0 rgba(255, 255, 255, 0.1);
        transform: translateZ(0);
        transition: all 0.3s ease;
    }

    .btn-3d:hover {
        transform: translateY(-2px) translateZ(10px);
        box-shadow: 
            0 8px 25px rgba(0, 0, 0, 0.4),
            inset 0 1px 0 rgba(255, 255, 255, 0.2);
    }

    .btn-3d:active {
        transform: translateY(0) translateZ(0);
    }

    .btn-primary-3d {
        background: linear-gradient(145deg, #00d4ff, #0099cc);
        box-shadow: 
            0 4px 15px rgba(0, 212, 255, 0.3),
            inset 0 1px 0 rgba(255, 255, 255, 0.2);
    }

    .btn-primary-3d:hover {
        box-shadow: 
            0 8px 25px rgba(0, 212, 255, 0.4),
            inset 0 1px 0 rgba(255, 255, 255, 0.3);
    }

    .perspective-container {
        perspective: 1000px;
        transform-style: preserve-3d;
    }

    .rotate-y {
        transform: rotateY(10deg);
    }

    .app-container { 
        max-width: 428px; 
        margin: 0 auto; 
        min-height: 100vh; 
        position: relative;
        background: linear-gradient(180deg, #0a0a0a 0%, #1a1a1a 100%);
    }

    .content-padding { 
        padding-bottom: 100px; 
    }

    .bottom-nav { 
        position: fixed; 
        bottom: 0; 
        left: 50%; 
        transform: translateX(-50%); 
        max-width: 428px; 
        width: 100%; 
        z-index: 50;
    }

    .cyber-grid {
        background-image: 
            linear-gradient(rgba(0, 212, 255, 0.1) 1px, transparent 1px),
            linear-gradient(90deg, rgba(0, 212, 255, 0.1) 1px, transparent 1px);
        background-size: 20px 20px;
    }

    .hologram-effect {
        background: linear-gradient(45deg, 
            transparent 30%, 
            rgba(0, 212, 255, 0.1) 50%, 
            transparent 70%);
        background-size: 20px 20px;
        animation: hologram 3s linear infinite;
    }

    @keyframes hologram {
        0% { background-position: 0 0; }
        100% { background-position: 20px 20px; }
    }

    .data-stream {
        position: relative;
        overflow: hidden;
    }

    .data-stream::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, 
            transparent, 
            rgba(0, 212, 255, 0.2), 
            transparent);
        animation: dataFlow 2s infinite;
    }

    @keyframes dataFlow {
        0% { left: -100%; }
        100% { left: 100%; }
    }

    .notification-badge {
        background: linear-gradient(145deg, #ff6b35, #cc5529);
        box-shadow: 0 0 10px rgba(255, 107, 53, 0.5);
    }

    /* Custom Scrollbar */
    ::-webkit-scrollbar {
        width: 6px;
    }

    ::-webkit-scrollbar-track {
        background: #1a1a1a;
    }

    ::-webkit-scrollbar-thumb {
        background: linear-gradient(180deg, #00d4ff, #0099cc);
        border-radius: 3px;
    }

    .metric-card {
        position: relative;
        overflow: hidden;
    }

    .metric-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 2px;
        background: linear-gradient(90deg, #00d4ff, #ff6b35, #00ff88);
        opacity: 0.8;
    }
</style>
    <!-- Header -->
    <header class="glass-morphism sticky top-0 z-40 p-4">
        <div class="flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <div class="w-12 h-12 bg-gradient-to-r from-primary to-secondary rounded-xl flex items-center justify-center neon-glow">
                    <i class="fas fa-chart-line text-white text-lg"></i>
                </div>
                <div>
                    <h1 class="text-xl font-bold">INVESTPRO</h1>
                    <p class="text-xs text-gray-400" id="currentTime"></p>
                </div>
            </div>
            <div class="flex items-center space-x-4">
                <div class="relative">
                    <button onclick="showNotifications()" class="text-gray-400 hover:text-white transition-colors">
                        <i class="fas fa-bell text-lg"></i>
                        <span id="notificationBadge" class="absolute -top-2 -right-2 notification-badge text-white text-xs rounded-full w-5 h-5 flex items-center justify-center hidden">0</span>
                    </button>
                </div>
                <button onclick="showProfile()" class="w-10 h-10 glass-morphism rounded-full flex items-center justify-center">
                    <i class="fas fa-user text-primary"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Content Area -->
    <div class="content-padding">
        <!-- Home Section -->
        <section id="home" class="p-4">
            <!-- Hero Section -->
            <div class="card-3d rounded-3xl p-8 mb-6 text-center gradient-3d">
                <div class="floating mb-6">
                    <div class="w-20 h-20 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center mx-auto neon-glow">
                        <i class="fas fa-rocket text-2xl text-white"></i>
                    </div>
                </div>
                <h2 class="text-3xl font-black mb-4 neon-text">Welcome to the Future</h2>
                <p class="text-gray-300 mb-8 text-lg">Track your investments with cutting-edge technology and earn through our referral system</p>
                
                <div class="grid grid-cols-2 gap-4 mb-8">
                    <div class="card-3d rounded-2xl p-4">
                        <i class="fas fa-shield-alt text-primary text-2xl mb-3"></i>
                        <h3 class="font-bold text-sm">Secure Tracking</h3>
                        <p class="text-gray-400 text-xs">Advanced encryption</p>
                    </div>
                    <div class="card-3d rounded-2xl p-4">
                        <i class="fas fa-users text-success text-2xl mb-3"></i>
                        <h3 class="font-bold text-sm">Referral System</h3>
                        <p class="text-gray-400 text-xs">Earn from referrals</p>
                    </div>
                </div>
                
                <div class="space-y-4">
                    <button onclick="showSection('register')" class="w-full btn-primary-3d text-white py-4 px-6 rounded-2xl font-bold text-lg pulse-3d">
                        <i class="fas fa-rocket mr-2"></i>
                        Start Tracking
                    </button>
                    <button onclick="showSection('login')" class="w-full btn-3d text-white py-4 px-6 rounded-2xl font-bold">
                        <i class="fas fa-sign-in-alt mr-2"></i>
                        Login to Account
                    </button>
                </div>
            </div>

            <!-- Features Grid -->
            <div class="grid grid-cols-1 gap-4">
                <div class="card-3d rounded-2xl p-6 flex items-center data-stream">
                    <div class="w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-500 rounded-2xl flex items-center justify-center mr-4 neon-glow">
                        <i class="fas fa-chart-bar text-white text-xl"></i>
                    </div>
                    <div>
                        <h3 class="font-bold text-lg">Real-time Tracking</h3>
                        <p class="text-gray-400">Monitor your investments 24/7</p>
                    </div>
                </div>
                
                <div class="card-3d rounded-2xl p-6 flex items-center data-stream">
                    <div class="w-16 h-16 bg-gradient-to-r from-green-500 to-teal-500 rounded-2xl flex items-center justify-center mr-4 neon-glow">
                        <i class="fas fa-network-wired text-white text-xl"></i>
                    </div>
                    <div>
                        <h3 class="font-bold text-lg">Single-Level Referrals</h3>
                        <p class="text-gray-400">Simple and effective referral system</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Register Section -->
        <section id="register" class="p-4 hidden">
            <div class="mb-6">
                <button onclick="showSection('home')" class="text-primary mb-4 flex items-center btn-3d px-4 py-2 rounded-xl">
                    <i class="fas fa-arrow-left mr-2"></i>
                    Back
                </button>
                <h2 class="text-3xl font-black text-center mb-2 neon-text">Join InvestPro</h2>
                <p class="text-gray-400 text-center">Register your investment details</p>
            </div>
            
            <form id="registerForm" class="space-y-6">
                <div class="card-3d rounded-2xl p-6">
                    <label class="block text-white font-semibold mb-3">
                        <i class="fas fa-user mr-2 text-primary"></i>
                        Full Name
                    </label>
                    <input type="text" id="fullName" required class="w-full bg-darker text-white placeholder-gray-500 px-4 py-4 rounded-xl border border-gray-700 focus:border-primary focus:outline-none transition-colors">
                </div>
                
                <div class="card-3d rounded-2xl p-6">
                    <label class="block text-white font-semibold mb-3">
                        <i class="fas fa-envelope mr-2 text-primary"></i>
                        Email Address
                    </label>
                    <input type="email" id="email" required class="w-full bg-darker text-white placeholder-gray-500 px-4 py-4 rounded-xl border border-gray-700 focus:border-primary focus:outline-none transition-colors">
                </div>
                
                <div class="card-3d rounded-2xl p-6">
                    <label class="block text-white font-semibold mb-3">
                        <i class="fas fa-dollar-sign mr-2 text-primary"></i>
                        Investment Amount (USD)
                    </label>
                    <input type="number" id="investmentAmount" required min="1" step="0.01" class="w-full bg-darker text-white placeholder-gray-500 px-4 py-4 rounded-xl border border-gray-700 focus:border-primary focus:outline-none transition-colors" placeholder="Enter your investment amount">
                    <p class="text-gray-500 text-sm mt-2">Amount you invested with your broker</p>
                </div>
                
                <div class="card-3d rounded-2xl p-6">
                    <label class="block text-white font-semibold mb-3">
                        <i class="fas fa-building mr-2 text-primary"></i>
                        Broker Name
                    </label>
                    <input type="text" id="brokerName" required class="w-full bg-darker text-white placeholder-gray-500 px-4 py-4 rounded-xl border border-gray-700 focus:border-primary focus:outline-none transition-colors" placeholder="Your broker's name">
                </div>
                
                <div class="card-3d rounded-2xl p-6">
                    <label class="block text-white font-semibold mb-3">
                        <i class="fas fa-gift mr-2 text-primary"></i>
                        Referral Code (Optional)
                    </label>
                    <input type="text" id="referralCode" class="w-full bg-darker text-white placeholder-gray-500 px-4 py-4 rounded-xl border border-gray-700 focus:border-primary focus:outline-none transition-colors" placeholder="Enter referral code if you have one">
                </div>
                
                <div class="card-3d rounded-2xl p-6">
                    <label class="block text-white font-semibold mb-3">
                        <i class="fas fa-lock mr-2 text-primary"></i>
                        Password
                    </label>
                    <input type="password" id="password" required class="w-full bg-darker text-white placeholder-gray-500 px-4 py-4 rounded-xl border border-gray-700 focus:border-primary focus:outline-none transition-colors">
                </div>
                
                <button type="submit" class="w-full btn-primary-3d text-white py-5 px-6 rounded-2xl font-bold text-lg pulse-3d">
                    <i class="fas fa-rocket mr-2"></i>
                    Create Account
                </button>
            </form>
        </section>

        <!-- Login Section -->
        <section id="login" class="p-4 hidden">
            <div class="mb-6">
                <button onclick="showSection('home')" class="text-primary mb-4 flex items-center btn-3d px-4 py-2 rounded-xl">
                    <i class="fas fa-arrow-left mr-2"></i>
                    Back
                </button>
                <h2 class="text-3xl font-black text-center mb-2 neon-text">Welcome Back</h2>
                <p class="text-gray-400 text-center">Access your investment dashboard</p>
            </div>
            
            <form id="loginForm" class="space-y-6">
                <div class="card-3d rounded-2xl p-6">
                    <label class="block text-white font-semibold mb-3">
                        <i class="fas fa-envelope mr-2 text-primary"></i>
                        Email Address
                    </label>
                    <input type="email" id="loginEmail" required class="w-full bg-darker text-white placeholder-gray-500 px-4 py-4 rounded-xl border border-gray-700 focus:border-primary focus:outline-none transition-colors">
                </div>
                
                <div class="card-3d rounded-2xl p-6">
                    <label class="block text-white font-semibold mb-3">
                        <i class="fas fa-lock mr-2 text-primary"></i>
                        Password
                    </label>
                    <input type="password" id="loginPassword" required class="w-full bg-darker text-white placeholder-gray-500 px-4 py-4 rounded-xl border border-gray-700 focus:border-primary focus:outline-none transition-colors">
                </div>
                
                <button type="submit" class="w-full btn-primary-3d text-white py-5 px-6 rounded-2xl font-bold text-lg">
                    <i class="fas fa-sign-in-alt mr-2"></i>
                    Login to Dashboard
                </button>
            </form>
        </section>

        <!-- Dashboard Section -->
        <section id="dashboard" class="p-4 hidden">
            <!-- Portfolio Overview -->
            <div class="card-3d rounded-3xl p-6 mb-6 gradient-3d">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-black">Portfolio Overview</h2>
                    <div class="flex items-center text-success">
                        <i class="fas fa-arrow-up mr-1"></i>
                        <span class="text-sm font-bold">Active</span>
                    </div>
                </div>
                
                <div class="text-center mb-6">
                    <p class="text-gray-400 text-sm mb-2">Total Investment</p>
                    <h3 class="text-4xl font-black neon-text" id="totalInvestment">$0.00</h3>
                    <p class="text-gray-400 text-sm mt-2">with <span id="brokerDisplay">Broker</span></p>
                </div>
                
                <div class="grid grid-cols-2 gap-4">
                    <div class="metric-card card-3d rounded-2xl p-4 text-center">
                        <p class="text-gray-400 text-xs mb-1">Join Date</p>
                        <p class="text-white font-bold" id="joinDate">-</p>
                    </div>
                    <div class="metric-card card-3d rounded-2xl p-4 text-center">
                        <p class="text-gray-400 text-xs mb-1">Status</p>
                        <p class="text-success font-bold">Active</p>
                    </div>
                </div>
            </div>

            <!-- Referral Section -->
            <div class="card-3d rounded-3xl p-6 mb-6">
                <h3 class="text-xl font-bold mb-4 flex items-center">
                    <i class="fas fa-users text-primary mr-2"></i>
                    Referral System
                </h3>
                
                <div class="glass-morphism rounded-2xl p-4 text-center mb-4 data-stream">
                    <p class="text-gray-400 text-sm mb-2">Your Referral Code</p>
                    <p class="text-3xl font-black text-primary neon-text" id="myReferralCode">-</p>
                </div>
                
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <div class="metric-card card-3d rounded-2xl p-4 text-center">
                        <i class="fas fa-user-plus text-primary text-xl mb-2"></i>
                        <p class="text-white font-bold text-lg" id="referralCount">0</p>
                        <p class="text-gray-400 text-xs">Referrals</p>
                    </div>
                    <div class="metric-card card-3d rounded-2xl p-4 text-center">
                        <i class="fas fa-dollar-sign text-success text-xl mb-2"></i>
                        <p class="text-white font-bold text-lg" id="referralEarnings">$0</p>
                        <p class="text-gray-400 text-xs">Earnings</p>
                    </div>
                </div>
                
                <button onclick="shareReferralLink()" class="w-full btn-primary-3d text-white py-4 px-6 rounded-2xl font-bold">
                    <i class="fas fa-share-alt mr-2"></i>
                    Share Referral Link
                </button>
            </div>
        </section>

        <!-- Referrals Section -->
        <section id="referrals" class="p-4 hidden">
            <h2 class="text-2xl font-black mb-6 neon-text">Your Referrals</h2>
            
            <!-- Referral Stats -->
            <div class="grid grid-cols-2 gap-4 mb-6">
                <div class="card-3d rounded-2xl p-6 text-center">
                    <i class="fas fa-users text-primary text-2xl mb-3"></i>
                    <p class="text-2xl font-bold" id="totalReferrals">0</p>
                    <p class="text-gray-400 text-sm">Total Referrals</p>
                </div>
                <div class="card-3d rounded-2xl p-6 text-center">
                    <i class="fas fa-money-bill-wave text-success text-2xl mb-3"></i>
                    <p class="text-2xl font-bold" id="totalEarnings">$0</p>
                    <p class="text-gray-400 text-sm">Total Earnings</p>
                </div>
            </div>

            <!-- Referral List -->
            <div class="card-3d rounded-3xl p-6">
                <h3 class="text-xl font-bold mb-4">Referral Network</h3>
                <div id="referralsList" class="space-y-4">
                    <div class="text-center text-gray-400 py-8">
                        <i class="fas fa-users text-4xl mb-4 opacity-50"></i>
                        <p>No referrals yet</p>
                        <p class="text-sm">Share your referral code to start earning</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Profile Section -->
        <section id="profile" class="p-4 hidden">
            <div class="card-3d rounded-3xl p-8 mb-6 text-center gradient-3d">
                <div class="w-24 h-24 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center text-white text-3xl font-bold mx-auto mb-4 neon-glow" id="profileAvatar">
                    U
                </div>
                <h3 class="text-2xl font-bold mb-2" id="profileName">User</h3>
                <p class="text-gray-400 mb-2" id="profileEmail">user@example.com</p>
                <div class="flex justify-center items-center">
                    <i class="fas fa-star text-warning mr-1"></i>
                    <span class="text-gray-300 text-sm">Premium Member</span>
                </div>
            </div>

            <!-- Account Stats -->
            <div class="grid grid-cols-2 gap-4 mb-6">
                <div class="card-3d rounded-2xl p-6 text-center">
                    <i class="fas fa-calendar-alt text-primary text-xl mb-3"></i>
                    <p class="text-xl font-bold" id="memberSince">0</p>
                    <p class="text-gray-400 text-sm">Days Active</p>
                </div>
                <div class="card-3d rounded-2xl p-6 text-center">
                    <i class="fas fa-chart-line text-success text-xl mb-3"></i>
                    <p class="text-xl font-bold" id="investmentStatus">Active</p>
                    <p class="text-gray-400 text-sm">Status</p>
                </div>
            </div>

            <!-- Settings -->
            <div class="card-3d rounded-3xl p-6 mb-6">
                <h3 class="text-xl font-bold mb-4">Settings</h3>
                <div class="space-y-4">
                    <div class="flex justify-between items-center">
                        <span class="text-gray-300">Push Notifications</span>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" class="sr-only peer" checked>
                            <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
                        </label>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-300">Dark Mode</span>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" class="sr-only peer" checked>
                            <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
                        </label>
                    </div>
                </div>
            </div>

            <div class="space-y-4">
                <button onclick="installApp()" class="w-full btn-3d text-white py-4 px-6 rounded-2xl font-bold">
                    <i class="fas fa-download mr-2 text-primary"></i>
                    Install App
                </button>
                
                <button onclick="logout()" class="w-full bg-gradient-to-r from-red-500 to-red-600 text-white py-4 px-6 rounded-2xl font-bold btn-3d">
                    <i class="fas fa-sign-out-alt mr-2"></i>
                    Logout
                </button>
            </div>
        </section>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav glass-morphism border-t border-gray-800">
        <div class="flex justify-around py-3">
            <button onclick="showSection('dashboard')" class="flex flex-col items-center py-2 px-3 text-gray-400 transition-colors" id="nav-dashboard">
                <i class="fas fa-chart-pie text-lg mb-1"></i>
                <span class="text-xs">Dashboard</span>
            </button>
            <button onclick="showSection('referrals')" class="flex flex-col items-center py-2 px-3 text-gray-400 transition-colors" id="nav-referrals">
                <i class="fas fa-users text-lg mb-1"></i>
                <span class="text-xs">Referrals</span>
            </button>
            <button onclick="showSection('home')" class="flex flex-col items-center py-2 px-3 text-gray-400 transition-colors" id="nav-home">
                <div class="w-12 h-12 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center mb-1 neon-glow">
                    <i class="fas fa-home text-white"></i>
                </div>
            </button>
            <button onclick="showSection('profile')" class="flex flex-col items-center py-2 px-3 text-gray-400 transition-colors" id="nav-profile">
                <i class="fas fa-user text-lg mb-1"></i>
                <span class="text-xs">Profile</span>
            </button>
        </div>
    </nav>
</div>

<!-- Toast Notification -->
<div id="toast" class="fixed top-20 left-1/2 transform -translate-x-1/2 glass-morphism text-white px-6 py-4 rounded-2xl shadow-lg z-50 hidden max-w-sm">
    <div class="flex items-center">
        <i id="toastIcon" class="fas fa-check-circle text-success mr-3"></i>
        <span id="toastMessage"></span>
    </div>
</div>

<!-- Install Prompt -->
<div id="installPrompt" class="fixed bottom-24 left-4 right-4 glass-morphism text-white p-4 rounded-2xl shadow-lg hidden">
    <div class="flex justify-between items-center">
        <div class="flex items-center">
            <i class="fas fa-mobile-alt text-primary text-xl mr-3"></i>
            <div>
                <h3 class="font-bold">Install App</h3>
                <p class="text-sm text-gray-400">Get faster access</p>
            </div>
        </div>
        <div class="flex space-x-2">
            <button onclick="installPWA()" class="bg-primary text-white px-4 py-2 rounded-xl text-sm font-bold">Install</button>
            <button onclick="dismissInstall()" class="text-gray-400 text-sm px-2">Later</button>
        </div>
    </div>
</div>

<script>
    // App Variables
    let users = JSON.parse(localStorage.getItem('investProUsers') || '[]');
    let currentUser = JSON.parse(localStorage.getItem('currentUser') || 'null');
    let notifications = JSON.parse(localStorage.getItem('notifications') || '[]');
    let deferredPrompt;

    // Initialize App
    document.addEventListener('DOMContentLoaded', function() {
        // Show splash screen
        setTimeout(() => {
            document.getElementById('splashScreen').style.display = 'none';
            initApp();
        }, 3000);

        // Update time
        updateCurrentTime();
        setInterval(updateCurrentTime, 1000);
    });

    function updateCurrentTime() {
        const now = new Date();
        const timeString = now.toLocaleTimeString('en-US', { 
            hour: '2-digit', 
            minute: '2-digit',
            hour12: true 
        });
        document.getElementById('currentTime').textContent = timeString;
    }

    function initApp() {
        updateNotificationBadge();
        
        if (currentUser) {
            showSection('dashboard');
            loadUserData();
        } else {
            showSection('home');
        }

        // Register service worker
        if ('serviceWorker' in navigator) {
            registerServiceWorker();
        }

        // PWA install prompt
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            setTimeout(() => showInstallPrompt(), 30000);
        });
    }

    function registerServiceWorker() {
        const swCode = `
            const CACHE_NAME = 'investpro-v1';
            const urlsToCache = ['/'];
            
            self.addEventListener('install', (event) => {
                event.waitUntil(
                    caches.open(CACHE_NAME)
                        .then((cache) => cache.addAll(urlsToCache))
                );
            });
            
            self.addEventListener('fetch', (event) => {
                event.respondWith(
                    caches.match(event.request)
                        .then((response) => response || fetch(event.request))
                );
            });
        `;
        
        const blob = new Blob([swCode], { type: 'application/javascript' });
        const swUrl = URL.createObjectURL(blob);
        
        navigator.serviceWorker.register(swUrl);
    }

    // Navigation
    function showSection(section) {
        const sections = ['home', 'register', 'login', 'dashboard', 'referrals', 'profile'];
        sections.forEach(s => {
            document.getElementById(s).classList.add('hidden');
        });
        document.getElementById(section).classList.remove('hidden');
        
        // Update nav active state
        document.querySelectorAll('[id^="nav-"]').forEach(nav => {
            nav.classList.remove('text-primary');
            nav.classList.add('text-gray-400');
        });
        
        const activeNav = document.getElementById(`nav-${section}`);
        if (activeNav) {
            activeNav.classList.remove('text-gray-400');
            activeNav.classList.add('text-primary');
        }
        
        if (section === 'dashboard' && currentUser) {
            loadDashboard();
        } else if (section === 'referrals' && currentUser) {
            loadReferrals();
        } else if (section === 'profile' && currentUser) {
            loadProfile();
        }
    }

    // Toast notifications
    function showToast(message, type = 'success') {
        const toast = document.getElementById('toast');
        const icon = document.getElementById('toastIcon');
        const messageEl = document.getElementById('toastMessage');
        
        messageEl.textContent = message;
        
        if (type === 'success') {
            icon.className = 'fas fa-check-circle text-success mr-3';
        } else if (type === 'error') {
            icon.className = 'fas fa-exclamation-circle text-red-400 mr-3';
        } else if (type === 'info') {
            icon.className = 'fas fa-info-circle text-primary mr-3';
        }
        
        toast.classList.remove('hidden');
        setTimeout(() => {
            toast.classList.add('hidden');
        }, 4000);
    }

    // Generate referral code
    function generateReferralCode() {
        return 'INV' + Math.random().toString(36).substr(2, 8).toUpperCase();
    }

    // Register form
    document.getElementById('registerForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        const userData = {
            id: Date.now(),
            fullName: document.getElementById('fullName').value,
            email: document.getElementById('email').value,
            investmentAmount: parseFloat(document.getElementById('investmentAmount').value),
            brokerName: document.getElementById('brokerName').value,
            referralCode: generateReferralCode(),
            referredBy: document.getElementById('referralCode').value || null,
            password: document.getElementById('password').value,
            joinDate: new Date().toISOString(),
            referrals: [],
            totalEarnings: 0
        };

        if (users.find(u => u.email === userData.email)) {
            showToast('This email is already registered', 'error');
            return;
        }

        // Handle referral
        if (userData.referredBy) {
            const referrer = users.find(u => u.referralCode === userData.referredBy);
            if (referrer) {
                referrer.referrals.push({
                    id: userData.id,
                    name: userData.fullName,
                    email: userData.email,
                    joinDate: userData.joinDate,
                    investment: userData.investmentAmount,
                    status: 'Active'
                });
                
                // Add referral bonus (5% of investment)
                const bonus = userData.investmentAmount * 0.05;
                referrer.totalEarnings += bonus;
                
                // Update referrer in users array
                const referrerIndex = users.findIndex(u => u.id === referrer.id);
                if (referrerIndex !== -1) {
                    users[referrerIndex] = referrer;
                }
            }
        }

        users.push(userData);
        localStorage.setItem('investProUsers', JSON.stringify(users));
        
        showToast('Registration successful! Welcome to InvestPro', 'success');
        document.getElementById('registerForm').reset();
        
        // Auto login
        currentUser = userData;
        localStorage.setItem('currentUser', JSON.stringify(userData));
        setTimeout(() => showSection('dashboard'), 2000);
    });

    // Login form
    document.getElementById('loginForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        const email = document.getElementById('loginEmail').value;
        const password = document.getElementById('loginPassword').value;
        
        const user = users.find(u => u.email === email && u.password === password);
        
        if (user) {
            currentUser = user;
            localStorage.setItem('currentUser', JSON.stringify(user));
            showToast('Welcome back, ' + user.fullName + '!', 'success');
            setTimeout(() => showSection('dashboard'), 1500);
            loadUserData();
        } else {
            showToast('Invalid email or password', 'error');
        }
    });

    // Load user data
    function loadUserData() {
        if (!currentUser) return;
        
        // Update user data from storage
        const updatedUser = users.find(u => u.id === currentUser.id);
        if (updatedUser) {
            currentUser = updatedUser;
            localStorage.setItem('currentUser', JSON.stringify(updatedUser));
        }
    }

    // Load dashboard
    function loadDashboard() {
        if (!currentUser) return;
        
        document.getElementById('totalInvestment').textContent = '$' + currentUser.investmentAmount.toLocaleString();
        document.getElementById('brokerDisplay').textContent = currentUser.brokerName;
        document.getElementById('joinDate').textContent = new Date(currentUser.joinDate).toLocaleDateString();
        document.getElementById('myReferralCode').textContent = currentUser.referralCode;
        document.getElementById('referralCount').textContent = currentUser.referrals.length;
        document.getElementById('referralEarnings').textContent = '$' + currentUser.totalEarnings.toFixed(2);
    }

    // Load referrals
    function loadReferrals() {
        if (!currentUser) return;
        
        document.getElementById('totalReferrals').textContent = currentUser.referrals.length;
        document.getElementById('totalEarnings').textContent = '$' + currentUser.totalEarnings.toFixed(2);
        
        const referralsList = document.getElementById('referralsList');
        if (currentUser.referrals.length > 0) {
            referralsList.innerHTML = currentUser.referrals.map((ref, index) => `
                <div class="card-3d rounded-2xl p-4 flex items-center justify-between data-stream">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center text-white font-bold mr-4">
                            ${ref.name.charAt(0).toUpperCase()}
                        </div>
                        <div>
                            <p class="text-white font-bold">${ref.name}</p>
                            <p class="text-gray-400 text-sm">${new Date(ref.joinDate).toLocaleDateString()}</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <p class="text-primary font-bold">$${ref.investment.toLocaleString()}</p>
                        <span class="bg-success/20 text-success px-2 py-1 rounded-full text-xs">${ref.status}</span>
                    </div>
                </div>
            `).join('');
        } else {
            referralsList.innerHTML = `
                <div class="text-center text-gray-400 py-8">
                    <i class="fas fa-users text-4xl mb-4 opacity-50"></i>
                    <p>No referrals yet</p>
                    <p class="text-sm">Share your referral code to start earning</p>
                </div>
            `;
        }
    }

    // Load profile
    function loadProfile() {
        if (!currentUser) return;
        
        document.getElementById('profileName').textContent = currentUser.fullName;
        document.getElementById('profileEmail').textContent = currentUser.email;
        document.getElementById('profileAvatar').textContent = currentUser.fullName.charAt(0).toUpperCase();
        
        const joinDate = new Date(currentUser.joinDate);
        const daysSince = Math.floor((new Date() - joinDate) / (1000 * 60 * 60 * 24));
        document.getElementById('memberSince').textContent = daysSince;
    }

    // Share referral link
    function shareReferralLink() {
        const referralLink = `https://www.investpro.com?ref=${currentUser.referralCode}`;
        const shareText = `ðŸš€ Join InvestPro!\n\nðŸ’¼ Professional Investment Tracking\nðŸ‘¥ Earn from Referrals\nðŸ”’ Secure Platform\n\nMy Referral Code: ${currentUser.referralCode}\nLink: ${referralLink}`;
        
        if (navigator.share) {
            navigator.share({
                title: 'InvestPro - Professional Investment Tracker',
                text: shareText,
                url: referralLink
            });
        } else if (navigator.clipboard) {
            navigator.clipboard.writeText(shareText);
            showToast('Referral link copied to clipboard!', 'success');
        } else {
            showToast('Referral link: ' + referralLink, 'info');
        }
    }

    // Update user data
    function updateUserData() {
        const userIndex = users.findIndex(u => u.id === currentUser.id);
        if (userIndex !== -1) {
            users[userIndex] = currentUser;
            localStorage.setItem('investProUsers', JSON.stringify(users));
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
        }
    }

    // Notifications
    function addNotification(title, message, type = 'info') {
        notifications.unshift({
            id: Date.now(),
            title,
            message,
            type,
            time: new Date().toISOString(),
            read: false
        });
        
        if (notifications.length > 50) {
            notifications = notifications.slice(0, 50);
        }
        
        localStorage.setItem('notifications', JSON.stringify(notifications));
        updateNotificationBadge();
    }

    function updateNotificationBadge() {
        const unreadCount = notifications.filter(n => !n.read).length;
        const badge = document.getElementById('notificationBadge');
        
        if (unreadCount > 0) {
            badge.textContent = unreadCount;
            badge.classList.remove('hidden');
        } else {
            badge.classList.add('hidden');
        }
    }

    function showNotifications() {
        const unreadNotifications = notifications.filter(n => !n.read);
        if (unreadNotifications.length > 0) {
            const notification = unreadNotifications[0];
            showToast(notification.title + ': ' + notification.message, notification.type);
            
            // Mark as read
            notifications.forEach(n => n.read = true);
            localStorage.setItem('notifications', JSON.stringify(notifications));
            updateNotificationBadge();
        } else {
            showToast('No new notifications', 'info');
        }
    }

    function showProfile() {
        if (currentUser) {
            showSection('profile');
        } else {
            showSection('login');
        }
    }

    function logout() {
        currentUser = null;
        localStorage.removeItem('currentUser');
        showToast('Logged out successfully', 'success');
        setTimeout(() => showSection('home'), 1500);
    }

    // PWA Installation
    function showInstallPrompt() {
        if (deferredPrompt) {
            document.getElementById('installPrompt').classList.remove('hidden');
        }
    }

    function dismissInstall() {
        document.getElementById('installPrompt').classList.add('hidden');
    }

    function installPWA() {
        if (deferredPrompt) {
            deferredPrompt.prompt();
            deferredPrompt.userChoice.then((choiceResult) => {
                if (choiceResult.outcome === 'accepted') {
                    showToast('App is being installed...', 'success');
                }
                deferredPrompt = null;
            });
        }
        dismissInstall();
    }

    function installApp() {
        if (deferredPrompt) {
            installPWA();
        } else {
            showToast('App already installed or not supported', 'info');
        }
    }

    // Loading animation
    const style = document.createElement('style');
    style.textContent = `
        @keyframes loading {
            0% { width: 0%; }
            100% { width: 100%; }
        }
    `;
    document.head.appendChild(style);

    // Welcome notification for new users
    if (currentUser && !localStorage.getItem('welcomeShown')) {
        setTimeout(() => {
            addNotification('Welcome!', 'Welcome to InvestPro. Start by sharing your referral code!', 'success');
            localStorage.setItem('welcomeShown', 'true');
        }, 5000);
    }
</script>
